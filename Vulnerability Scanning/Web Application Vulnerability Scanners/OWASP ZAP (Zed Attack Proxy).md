`OWASP ZAP (Zed Attack Proxy)` is a popular open-source security tool for finding vulnerabilities in web applications. It provides both a GUI and a command-line interface (CLI) as well as an extensive API for automation. Below is a guide for interacting with OWASP ZAP using its CLI and API, including options and examples.

### **OWASP ZAP CLI Commands and API Options**

#### **1. CLI Commands**

OWASP ZAP provides several CLI options for automated and headless operation.

1. **Start ZAP in Daemon Mode:**
   - **Description:** Start ZAP in daemon mode for headless operation.
   - **Command:**
     ```bash
     zap.sh -daemon -port <port> -host <host>
     ```
   - **Example:**
     ```bash
     zap.sh -daemon -port 8080 -host 127.0.0.1
     ```

2. **Start a Scan:**
   - **Description:** Start an active scan on a target URL.
   - **Command:**
     ```bash
     zap-cli -host <host> -port <port> -url <target_url> -scan
     ```
   - **Example:**
     ```bash
     zap-cli -host 127.0.0.1 -port 8080 -url http://example.com -scan
     ```

3. **Get Scan Status:**
   - **Description:** Check the status of an active scan.
   - **Command:**
     ```bash
     zap-cli -host <host> -port <port> -scan-status
     ```
   - **Example:**
     ```bash
     zap-cli -host 127.0.0.1 -port 8080 -scan-status
     ```

4. **Generate a Report:**
   - **Description:** Generate a report from scan results.
   - **Command:**
     ```bash
     zap-cli -host <host> -port <port> -report <report_type> -output <output_file>
     ```
   - **Example:**
     ```bash
     zap-cli -host 127.0.0.1 -port 8080 -report html -output zap_report.html
     ```

5. **Stop ZAP:**
   - **Description:** Stop the ZAP daemon.
   - **Command:**
     ```bash
     zap-cli -host <host> -port <port> -shutdown
     ```
   - **Example:**
     ```bash
     zap-cli -host 127.0.0.1 -port 8080 -shutdown
     ```

#### **2. API Interaction**

OWASP ZAP provides a REST API for automation and integration. Below are some examples of common API interactions.

1. **Authenticate with API:**
   - **Description:** Authenticate and obtain a session token.
   - **Command:**
     ```bash
     curl -X GET "http://<zap_host>:<port>/JSON/core/action/newSession/?apikey=<api_key>"
     ```
   - **Example:**
     ```bash
     curl -X GET "http://127.0.0.1:8080/JSON/core/action/newSession/?apikey=1234567890"
     ```

2. **Start a Spider Scan:**
   - **Description:** Start a spider scan on a target URL.
   - **Command:**
     ```bash
     curl -X GET "http://<zap_host>:<port>/JSON/spider/action/scan/?url=<target_url>&maxDepth=<depth>&recurse=<true_or_false>&contextName=<context>"
     ```
   - **Example:**
     ```bash
     curl -X GET "http://127.0.0.1:8080/JSON/spider/action/scan/?url=http://example.com&maxDepth=2&recurse=true"
     ```

3. **Start an Active Scan:**
   - **Description:** Start an active scan on a target URL.
   - **Command:**
     ```bash
     curl -X GET "http://<zap_host>:<port>/JSON/ascan/action/scan/?url=<target_url>&recurse=<true_or_false>&inScopeOnly=<true_or_false>"
     ```
   - **Example:**
     ```bash
     curl -X GET "http://127.0.0.1:8080/JSON/ascan/action/scan/?url=http://example.com&recurse=true&inScopeOnly=true"
     ```

4. **Get Scan Progress:**
   - **Description:** Retrieve the progress of an ongoing scan.
   - **Command:**
     ```bash
     curl -X GET "http://<zap_host>:<port>/JSON/ascan/view/status/?scanId=<scan_id>"
     ```
   - **Example:**
     ```bash
     curl -X GET "http://127.0.0.1:8080/JSON/ascan/view/status/?scanId=1"
     ```

5. **Generate a Report:**
   - **Description:** Generate a report from scan results.
   - **Command:**
     ```bash
     curl -X GET "http://<zap_host>:<port>/OTHER/core/other/htmlreport/?apikey=<api_key>"
     ```
   - **Example:**
     ```bash
     curl -X GET "http://127.0.0.1:8080/OTHER/core/other/htmlreport/?apikey=1234567890" -o zap_report.html
     ```

6. **Get Alerts:**
   - **Description:** Retrieve alerts from the scan results.
   - **Command:**
     ```bash
     curl -X GET "http://<zap_host>:<port>/JSON/core/view/alerts/?baseurl=<base_url>&count=<count>&start=<start>"
     ```
   - **Example:**
     ```bash
     curl -X GET "http://127.0.0.1:8080/JSON/core/view/alerts/?baseurl=http://example.com&count=10&start=0"
     ```

### **Usage Notes**

- **API Key:** Replace `<api_key>` with your API key for authentication and authorized requests.
- **API Documentation:** Refer to the [OWASP ZAP API documentation](https://www.zaproxy.org/docs/api/) for detailed information on endpoints and parameters.
- **Permissions:** Ensure you have appropriate permissions to perform actions such as starting scans and generating reports.