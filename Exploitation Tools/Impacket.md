Impacket is a collection of Python classes for working with network protocols. It's used for penetration testing and network security assessments, offering various tools and scripts to interact with network services and perform attacks.

### **Impacket Commands and Options**

1. **`smbclient.py`** – SMB Client

   - **Description:** Connects to an SMB server to interact with shared resources.
   - **Command:**
     ```bash
     smbclient.py <target_ip> -username <user> -password <pass> -domain <domain> -share <share>
     ```
   - **Example:**
     ```bash
     smbclient.py 192.168.1.10 -username admin -password password -domain example -share C$
     ```
   - **Explanation:** Connects to the `C$` share on the target SMB server with specified credentials.

2. **`smbserver.py`** – SMB Server

   - **Description:** Sets up an SMB server to share files with other systems.
   - **Command:**
     ```bash
     smbserver.py <share_name> <path_to_share> -username <user> -password <pass>
     ```
   - **Example:**
     ```bash
     smbserver.py SHARES /tmp/shares -username guest -password guest
     ```
   - **Explanation:** Shares the `/tmp/shares` directory as `SHARES` with guest credentials.

3. **`wmiexec.py`** – WMI Execution

   - **Description:** Executes commands on a remote Windows machine via WMI.
   - **Command:**
     ```bash
     wmiexec.py <target_ip> -username <user> -password <pass> -domain <domain> "<command>"
     ```
   - **Example:**
     ```bash
     wmiexec.py 192.168.1.10 -username admin -password password -domain example "ipconfig"
     ```
   - **Explanation:** Runs `ipconfig` on the remote machine using WMI.

4. **`psexec.py`** – PSExec

   - **Description:** Executes commands on a remote Windows machine using SMB.
   - **Command:**
     ```bash
     psexec.py <target_ip> -username <user> -password <pass> -domain <domain> "<command>"
     ```
   - **Example:**
     ```bash
     psexec.py 192.168.1.10 -username admin -password password -domain example "whoami"
     ```
   - **Explanation:** Executes `whoami` on the remote target.

5. **`atexec.py`** – Active Directory Execution

   - **Description:** Executes commands on a remote Windows machine using Active Directory.
   - **Command:**
     ```bash
     atexec.py <target_ip> -username <user> -password <pass> -domain <domain> "<command>"
     ```
   - **Example:**
     ```bash
     atexec.py 192.168.1.10 -username admin -password password -domain example "systeminfo"
     ```
   - **Explanation:** Runs `systeminfo` on the remote machine via Active Directory.

6. **`ntlmrelayx.py`** – NTLM Relay

   - **Description:** Relays NTLM authentication requests to another system.
   - **Command:**
     ```bash
     ntlmrelayx.py -t <target_ip> -smb2support -i <interface>
     ```
   - **Example:**
     ```bash
     ntlmrelayx.py -t 192.168.1.10 -smb2support -i eth0
     ```
   - **Explanation:** Relays NTLM authentication requests to `192.168.1.10` and listens on `eth0`.

7. **`secretsdump.py`** – Dump Windows Credentials

   - **Description:** Dumps credentials from a Windows machine.
   - **Command:**
     ```bash
     secretsdump.py <target_ip> -username <user> -password <pass> -domain <domain>
     ```
   - **Example:**
     ```bash
     secretsdump.py 192.168.1.10 -username admin -password password -domain example
     ```
   - **Explanation:** Dumps password hashes and other credentials from the target machine.

8. **`getTGT.py`** – Get Ticket Granting Ticket

   - **Description:** Retrieves a Ticket Granting Ticket (TGT) from a Kerberos server.
   - **Command:**
     ```bash
     getTGT.py <target_ip> -username <user> -password <pass>
     ```
   - **Example:**
     ```bash
     getTGT.py 192.168.1.10 -username admin -password password
     ```
   - **Explanation:** Retrieves the TGT from the target Kerberos server.

9. **`kerberoast.py`** – Kerberoasting

   - **Description:** Requests and cracks Kerberos service tickets.
   - **Command:**
     ```bash
     kerberoast.py -target <target_ip> -username <user> -password <pass>
     ```
   - **Example:**
     ```bash
     kerberoast.py -target 192.168.1.10 -username admin -password password
     ```
   - **Explanation:** Requests Kerberos service tickets and attempts to crack them.

10. **`dcomexec.py`** – DCOM Execution

    - **Description:** Executes commands on a remote Windows machine using DCOM.
    - **Command:**
      ```bash
      dcomexec.py <target_ip> -username <user> -password <pass> -domain <domain> "<command>"
      ```
    - **Example:**
      ```bash
      dcomexec.py 192.168.1.10 -username admin -password password -domain example "netstat -an"
      ```
    - **Explanation:** Runs `netstat -an` on the remote target via DCOM.

### **Summary of Impacket Commands**

| **Tool**        | **Command Example**                                   | **Description**                                    |
|-----------------|-------------------------------------------------------|----------------------------------------------------|
| `smbclient.py`  | `smbclient.py 192.168.1.10 -username admin -password password -domain example -share C$` | Connects to an SMB share                          |
| `smbserver.py`  | `smbserver.py SHARES /tmp/shares -username guest -password guest` | Sets up an SMB server                              |
| `wmiexec.py`    | `wmiexec.py 192.168.1.10 -username admin -password password -domain example "ipconfig"` | Executes commands via WMI                         |
| `psexec.py`     | `psexec.py 192.168.1.10 -username admin -password password -domain example "whoami"` | Executes commands via SMB                          |
| `atexec.py`     | `atexec.py 192.168.1.10 -username admin -password password -domain example "systeminfo"` | Executes commands using Active Directory         |
| `ntlmrelayx.py` | `ntlmrelayx.py -t 192.168.1.10 -smb2support -i eth0` | Relays NTLM authentication requests                |
| `secretsdump.py` | `secretsdump.py 192.168.1.10 -username admin -password password -domain example` | Dumps Windows credentials                          |
| `getTGT.py`     | `getTGT.py 192.168.1.10 -username admin -password password` | Retrieves a Ticket Granting Ticket (TGT)          |
| `kerberoast.py` | `kerberoast.py -target 192.168.1.10 -username admin -password password` | Requests and cracks Kerberos service tickets      |
| `dcomexec.py`   | `dcomexec.py 192.168.1.10 -username admin -password password -domain example "netstat -an"` | Executes commands via DCOM                         |

Impacket tools are widely used for network security assessments and can assist in various penetration testing tasks.